<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" href="https://raw.githubusercontent.com/phipalibunao/CS3_2ndQtr_K18_K21/main/assets/cspairproj_favicon2.png" sizes="any">
<link rel="icon" type="image/png" href="https://raw.githubusercontent.com/phipalibunao/CS3_2ndQtr_K18_K21/main/assets/cspairproj_favicon2.png">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Fractured Night â€” Headline</title>
<meta name="description" content="Webpage telling the story of the first act.">
<meta name="author" content="Phipa Libunao, Datu Macalintal">

<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../assets/styles/story1.css">

</head>

<body>

<div class="flash" id="flash"></div>

<div class="navbar">
  <a href="homepage.html">Home</a>
  <a href="story1.html">Act 1</a>
  <a href="story2.html">Act 2</a>
  <a href="story3.html">Act 3</a>
  <a href="story4.html">Act 4</a>
  <a href="aboutus.html">About Us</a>
</div>

<!-- PLAYER TAG -->
<div id="playerTag"></div>

<div class="wrap">
<header>
<h1>Chapter 1: Headline</h1>
<div class="pov-sign">POV: Journalist</div>
<p class="lead">Step into the shoes of a journalist on a stormy night. Explore the scene, uncover hidden truths, and decide what the city will see as reality.</p>
</header>

<div class="scene">
<div class="card-scene">
<div class="description" id="sceneText">
Rain lashes down as darkness envelops the city. Debris from the collapsed bridge litters the street. The air is heavy with tension, and distant sirens wail. You clutch your camera tightly, knowing that every photo and note you collect could change the story the city will believe.
</div>

<img id="photoPlaceholder" class="placeholder-img" style="display:none">

<div class="hotspots">
<div class="hotspot" data-id="shadow">ğŸ“¸<br>Mysterious Shadow</div>
<div class="hotspot" data-id="memo">ğŸ“<br>Supervisor's Memo</div>
<div class="hotspot locked" id="weakSpot" data-id="weak">ğŸ“·<br>â“</div>
<div class="hotspot" data-id="witness">ğŸ‘£<br>Witness Notes</div>
</div>

<div class="controls">
<button class="btn" id="investigateBtn">Investigate Deeper</button>
<button class="btn primary" id="publishBtn">Publish Findings</button>
<div style="flex:1"></div>
<div>Evidence Collected: <strong id="count">0</strong></div>
</div>

<div class="outcome">
<div id="publicStory">The city waits. Each decision you make will shape their perception.</div>
</div>
</div>

<aside class="inventory">
<div id="inventoryList"><div class="inv-empty show">Nothing yet.</div></div>
</aside>
</div>
</div>

<script>
const playerTag = document.getElementById("playerTag");
const playerName = localStorage.getItem("playerName") || "Guest";
playerTag.textContent = `Player: ${playerName}`;

let inventory=[]
const invList=document.getElementById("inventoryList")
const countEl=document.getElementById("count")
const photo=document.getElementById("photoPlaceholder")
const publicStory=document.getElementById("publicStory")
const weakSpot=document.getElementById("weakSpot")
const flash=document.getElementById("flash")
const desc=document.getElementById("sceneText")

setTimeout(()=>{desc.classList.add("show")},300)

for(let i=0;i<150;i++){
  const drop=document.createElement("div")
  drop.className="rain"
  drop.style.left=Math.random()*100+"%"
  drop.style.animationDuration=0.5+Math.random()*0.5+"s"
  drop.style.animationDelay=Math.random()*2+"s"
  document.body.appendChild(drop)
  drop.style.top="-20px"
}

function lightning(){
  flash.style.opacity=0.6
  setTimeout(()=>{flash.style.opacity=0},100)
  setTimeout(lightning,2000+Math.random()*4000)
}
lightning()

function refreshInv(){
  invList.innerHTML=""
  if(inventory.length===0){
    let e=document.createElement("div")
    e.className="inv-empty show"
    e.textContent="Nothing yet."
    invList.appendChild(e)
  }else{
    inventory.forEach(i=>{
      let box=document.createElement("div")
      box.className="inv-item"
      let span=document.createElement("span")
      span.textContent=i.label
      let check=document.createElement("input")
      check.type="checkbox"
      check.checked=true
      check.dataset.id=i.id
      box.appendChild(span)
      box.appendChild(check)
      invList.appendChild(box)
      setTimeout(()=>{box.classList.add("show")},50)
    })
  }
  countEl.textContent=inventory.length
}

function addItem(id,label,img,text){
  if(inventory.some(x=>x.id===id))return
  inventory.push({id,label})
  photo.style.display="block"
  photo.style.opacity=0
  photo.src=img
  setTimeout(()=>{photo.style.opacity=1},50)
  refreshInv()
  publicStory.textContent=text
}

document.querySelectorAll(".hotspot").forEach(h=>{
  h.onclick=()=>{
    if(h.classList.contains("locked"))return
    let id=h.dataset.id
    if(id==="shadow")addItem("shadow","Blurry Shadow Photo","https://raw.githubusercontent.com/phipalibunao/CS3_2ndQtr_K18_K21/main/assets/shadowfigure.png","You capture a shadowy figure moving across the bridge, almost lost to the storm.")
    if(id==="memo")addItem("memo","Supervisor Memo","https://raw.githubusercontent.com/phipalibunao/CS3_2ndQtr_K18_K21/main/assets/memoredacted.png","A memo warning the engineer not to repair the bridge. The motives are unclear.")
    if(id==="witness")addItem("witness","Witness Note","https://raw.githubusercontent.com/phipalibunao/CS3_2ndQtr_K18_K21/main/assets/witnesshuhu.png","A witness notes the creaking sounds and panic the night before the collapse.")
    if(id==="weak")addItem("weak","Mysterious Photo","https://raw.githubusercontent.com/phipalibunao/CS3_2ndQtr_K18_K21/main/assets/blurbridge.png","Hidden beneath the rubble, a photo reveals the ************.")
  }
})

document.getElementById("investigateBtn").onclick=()=>{
  weakSpot.classList.remove("locked")
  publicStory.textContent="You dig through the debris, finding a hidden camera that might reveal more."
  setTimeout(()=>{publicStory.textContent="The camera holds a new, revealing photograph of ********."},1400)
}

document.getElementById("publishBtn").onclick=()=>{
  if(inventory.length===0){publicStory.textContent="You publish nothing. The city remains hungry for answers.";return}
  publicStory.textContent="You publish the collected evidence. The city quickly spins the story into sabotage and blame."
  document.getElementById("publishBtn").style.display="none"
  let truthBtn=document.createElement("button")
  truthBtn.className="btn primary"
  truthBtn.textContent="Discover the truth behind the shadows"
  truthBtn.style.marginTop="12px"
  truthBtn.onclick=()=>{window.location.href="act1game.html"}
  document.querySelector(".controls").appendChild(truthBtn)
}
</script>

</body>
</html>
