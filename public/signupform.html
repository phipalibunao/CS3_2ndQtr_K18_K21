<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Before the Story - Fractured Night</title>
<link rel="icon" href="https://raw.githubusercontent.com/phipalibunao/CS3_2ndQtr_K18_K21/main/assets/cspairproj_favicon2.png">
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">

<style>
body {
  margin:0;
  height:100vh;
  background:black;
  font-family:'Special Elite',cursive;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#00ff88;
}

#loadingScreen {
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:9999;
  color:#00ff88;
  font-size:1rem;
  letter-spacing:2px;
}

.glitch {
  animation:glitch 0.15s infinite alternate;
}

@keyframes glitch {
  0%{transform:translateX(-3px) rotate(-1deg);}
  50%{transform:translateX(3px) rotate(1deg);}
  100%{transform:translateX(-2px);}
}

#stormScreen {
  position:fixed;
  inset:0;
  overflow:hidden;
  z-index:1;
}

.wind {
  position:absolute;
  background:white;
  opacity:0.05;
  animation:windMove linear infinite;
}

@keyframes windMove {
  0%{transform:translateX(-100vw);}
  100%{transform:translateX(100vw);}
}

.flash {
  position:fixed;
  inset:0;
  background:white;
  opacity:0;
  transition:opacity .1s;
  z-index:2;
  pointer-events:none;
}

.corruptBlock {
  position:absolute;
  background:#00ff88;
  width:5px;
  height:5px;
  opacity:0.2;
  z-index:5;
  animation:corruptFade 0.5s infinite alternate;
}

@keyframes corruptFade {
  0%{opacity:0;}
  100%{opacity:0.3;}
}

form {
  position:relative;
  z-index:3;
  background:rgba(0,0,0,0.95);
  padding:40px;
  border:2px solid #00ff88;
  box-shadow:0 0 30px rgba(0,255,136,0.3);
  display:none;
  flex-direction:column;
  gap:20px;
  width:300px;
  animation:pop 0.8s ease forwards, shake 0.8s ease forwards;
}

@keyframes pop {
  from{transform:scale(.7) rotate(-2deg);opacity:0;}
  to{transform:scale(1) rotate(0deg);opacity:1;}
}

@keyframes shake {
  0%,100%{transform:translateX(0);}
  20%{transform:translateX(-5px);}
  40%{transform:translateX(5px);}
  60%{transform:translateX(-3px);}
  80%{transform:translateX(3px);}
}

h1 {
  font-size:1.3rem;
  text-align:center;
  color:#00ff88;
}

input,select {
  padding:8px;
  background:black;
  color:#00ff88;
  border:1px solid #00ff88;
  font-family:'Special Elite',cursive;
}

button {
  padding:10px;
  background:#00ff88;
  color:black;
  border:none;
  cursor:pointer;
  font-family:'Special Elite',cursive;
  transition:.3s;
}

button:hover {
  background:white;
  color:black;
}
</style>
</head>

<body>

<div id="loadingScreen">
  <div class="glitch">SYSTEM BREACH DETECTED</div>
  <div class="glitch">Initializing Story Engine...</div>
  <div class="glitch">Loading Night Protocol...</div>
</div>

<div id="stormScreen"></div>
<div class="flash" id="flash"></div>

<form id="playerForm">
  <h1>Step Into the Night...</h1>
  <input type="text" id="playerName" placeholder="Enter your alias" required>

  <label>How do you usually view news?</label>
  <select id="trustNews" required>
    <option value="">--Select your mindset--</option>
    <option value="Always trust it">Always trust it</option>
    <option value="Sometimes question it">Sometimes question it</option>
    <option value="Rarely trust it">Rarely trust it</option>
  </select>

  <button type="submit">Begin Story</button>
</form>

<script>
const loading = document.getElementById("loadingScreen");
const form = document.getElementById("playerForm");
const storm = document.getElementById("stormScreen");
const flash = document.getElementById("flash");

// loading screen delay
window.addEventListener("load", () => {
  setTimeout(() => {
    loading.style.display = "none";
    form.style.display = "flex";
  }, 3000);
});

// form submit
form.addEventListener("submit", function(e) {
  e.preventDefault();
  localStorage.setItem("playerName", document.getElementById("playerName").value);
  localStorage.setItem("trustNews", document.getElementById("trustNews").value);
  window.location.href = "homepage.html";
});

// generate wind streaks
for(let i=0;i<100;i++){
  const gust = document.createElement("div");
  gust.className="wind";
  gust.style.top=Math.random()*100+"vh";
  gust.style.animationDuration=3+Math.random()*3+"s";
  gust.style.animationDelay=Math.random()*3+"s";
  gust.style.width=1+Math.random()*3+"px";
  gust.style.height=20+Math.random()*30+"px";
  storm.appendChild(gust);
}

// flashing screen
setInterval(() => {
  flash.style.opacity=0.4;
  setTimeout(()=>{flash.style.opacity=0;},150);
}, 2000+Math.random()*2000);

// random corruption blocks
for(let i=0;i<200;i++){
  const block=document.createElement("div");
  block.className="corruptBlock";
  block.style.top=Math.random()*100+"vh";
  block.style.left=Math.random()*100+"vw";
  block.style.width=2+Math.random()*5+"px";
  block.style.height=2+Math.random()*5+"px";
  storm.appendChild(block);
}
</script>

</body>
</html>
