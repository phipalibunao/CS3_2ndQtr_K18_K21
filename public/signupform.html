<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="https://raw.githubusercontent.com/phipalibunao/CS3_2ndQtr_K18_K21/main/assets/cspairproj_favicon2.png" sizes="any">
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/phipalibunao/CS3_2ndQtr_K18_K21/main/assets/cspairproj_favicon2.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Choose Your Ally</title>
    <meta name="description" content="Player selects an ally for Fractured Night">
    <meta name="author" content="Phipa Libunao, Tomas Macalintal">
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">

<style>
body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: 'Special Elite', monospace;
  background: black;
  color: white;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}

#stormScreen {
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  background: #0b0b0f;
  overflow: hidden;
  z-index: 1;
}

.wind {
  position: absolute;
  width: 2px;
  height: 40px;
  background: rgba(255,255,255,0.2);
  animation: blow linear infinite;
  border-radius: 50%;
  opacity: 0.6;
}

@keyframes blow {
  0% { transform: translateX(-100px) translateY(0) rotate(0deg); opacity: 0.3; }
  50% { opacity: 0.6; }
  100% { transform: translateX(100vw) translateY(-50px) rotate(360deg); opacity: 0; }
}

.flash {
  position: absolute;
  top:0; left:0; width:100%; height:100%;
  background: white;
  opacity:0;
  pointer-events:none;
  z-index: 10;
}

form {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 25px;
  background: rgba(20,20,20,0.95);
  padding: 50px;
  border-radius: 15px;
  text-align: center;
  max-width: 450px;
  width: 90%;
  z-index: 5;
  opacity: 0;
  animation: fadeIn 2s forwards 1s;
}

h1 span.typing {
  display: inline-block;
  overflow: hidden; 
  white-space: nowrap;
  border-right: 0.15em solid #fff;
  animation: typing 3s steps(30,end), blink 0.75s step-end infinite;
}

input, select, button {
  padding: 12px;
  font-family: 'Special Elite', monospace;
  font-size: 16px;
  border-radius: 8px;
  border: 2px solid #fff;
  background: #111;
  color: #fff;
}

input:focus, select:focus {
  outline: none;
  border-color: #fff;
}

button {
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 18px;
}

button:hover {
  background: #fff;
  color: black;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes typing {
  from { width: 0; }
  to { width: 100%; }
}

@keyframes blink {
  50% { border-color: transparent; }
}
</style>
</head>
<body>

<div id="stormScreen"></div>
<div class="flash" id="flash"></div>

<form id="playerForm">
  <h1><span class="typing">Step Into the Night...</span></h1>
  <input type="text" id="playerName" placeholder="Enter your alias" required>
  <label for="allyChoice">Who will you trust tonight?</label>
  <select id="allyChoice" required>
    <option value="">--Select an ally--</option>
    <option value="Engineer">The Engineer</option>
    <option value="Journalist">The Journalist</option>
    <option value="Supervisor">The Supervisor</option>
    <option value="Mayor">The Mayor</option>
  </select>
  <button type="submit">Begin Story</button>
</form>

<script>
const form = document.getElementById('playerForm');
const storm = document.getElementById('stormScreen');
const flash = document.getElementById('flash');

form.addEventListener('submit', function(e){
  e.preventDefault();
  localStorage.setItem('playerName', document.getElementById('playerName').value);
  localStorage.setItem('allyChoice', document.getElementById('allyChoice').value);
  window.location.href = 'homepage.html';
});

for(let i=0;i<100;i++){
  const gust = document.createElement('div');
  gust.className = 'wind';
  gust.style.top = Math.random()*100+'vh';
  gust.style.animationDuration = 3 + Math.random()*3+'s';
  gust.style.animationDelay = Math.random()*3+'s';
  gust.style.width = 1 + Math.random()*3+'px';
  gust.style.height = 20 + Math.random()*30+'px';
  storm.appendChild(gust); 
}

setInterval(() => {
  flash.style.opacity = 0.4;
  setTimeout(()=>{ flash.style.opacity = 0; }, 150);
}, 4000 + Math.random()*3000);
</script>

</body>
</html>
