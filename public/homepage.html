<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fractured Night Intro</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&family=Special+Elite&display=swap" rel="stylesheet">
<style>
body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  font-family: 'Roboto', sans-serif;
  background: black;
  color: white;
}

#introScreen {
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  flex-direction: column;
  background: black;
  z-index: 10;
  text-align: center;
}

#introScreen h1 {
  font-size: 48px;
  font-family: 'Special Elite', monospace;
  color: #fff;
  margin: 0;
  text-shadow: 2px 2px 15px #000;
}

#stormScreen {
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  background: #0b0b0f;
  overflow: hidden;
  display: none;
  z-index: 9;
  transition: opacity 1s ease;
}

#titleScreen {
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  text-align: center;
  opacity: 0;
  z-index: 8;
  background-image: url('./assets/cshomepagebg.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transition: opacity 1s ease;
}

#titleScreen h1 {
  font-family: 'Special Elite', monospace;
  font-size: 72px;
  text-shadow: 3px 3px 20px #000;
  color: #fff;
}

#titleScreen h1 span {
  display: inline-block;
  overflow: hidden; 
  white-space: nowrap;
  border-right: 0.15em solid #fff;
  width: 0;
}

@keyframes typing {
  from { width: 0; }
  to { width: 100%; }
}

@keyframes blink {
  50% { border-color: transparent; }
}

span.typing {
  animation: typing 4s steps(19, end), blink 0.75s step-end infinite;
}

.rain {
  position: absolute;
  width: 2px;
  height: 15px;
  background: rgba(255,255,255,0.3);
  animation: fall linear infinite;
}

@keyframes fall {
  to { transform: translateY(100vh); }
}

.flash {
  position: absolute;
  top:0; left:0; width:100%; height:100%;
  background: white;
  opacity:0;
  pointer-events:none;
  z-index: 20;
}
</style>
</head>
<body>

<div id="introScreen">
  <h1>Click to Start</h1>
  <p style="color:#ccc;margin-top:10px;">Enter the nightâ€¦</p>
</div>

<div id="stormScreen"></div>
<div class="flash" id="flash"></div>

<div id="titleScreen">
  <h1 id="titleText"><span>THE FRACTURED NIGHT</span></h1>
</div>

<script>
const intro = document.getElementById('introScreen');
const storm = document.getElementById('stormScreen');
const titleScreen = document.getElementById('titleScreen');
const titleSpan = document.querySelector('#titleText span');
const flash = document.getElementById('flash');

let stormStarted = false;
let readyForTitle = false;
let rainDrops = [];

intro.addEventListener('click', () => {
  if(!stormStarted){
    stormStarted = true;
    intro.style.display = 'none';
    storm.style.display = 'block';
    startStorm();
  } else if(readyForTitle){
    finalLightning();
    readyForTitle = false;
  }
});

function startStorm() {
  for(let i=0;i<150;i++){
    const drop = document.createElement('div');
    drop.className = 'rain';
    drop.style.left = Math.random()*100+'%';
    drop.style.animationDuration = 0.5+Math.random()*0.5+'s';
    drop.style.animationDelay = Math.random()*2+'s';
    storm.appendChild(drop); 
    rainDrops.push(drop);
  }

  setTimeout(() => {
    flash.style.opacity = 0.3;
    setTimeout(() => { flash.style.opacity = 0; }, 150);
    readyForTitle = true;
  }, 800);
}

function finalLightning() {
  flash.style.opacity = 1;

  storm.style.opacity = 0;
  setTimeout(() => {
    storm.style.display = 'none';
    rainDrops.forEach(drop => drop.remove());
    flash.style.opacity = 0;
    showTitle();
<<<<<<< HEAD
  }, 400);
=======
  }, 400); 
>>>>>>> 5a061c4b8979470f1920ce9eb528061b25d0eec0
}

function showTitle(){
  titleScreen.style.opacity = 1;
<<<<<<< HEAD
  titleScreen.offsetHeight;
=======
  titleScreen.offsetHeight; 
>>>>>>> 5a061c4b8979470f1920ce9eb528061b25d0eec0
  titleSpan.classList.add('typing');
}
</script>  

</body>
</html>